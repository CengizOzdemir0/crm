<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/main :: layout(~{::title}, ~{::section}, 'dashboard')}">

<head>
    <title>Gösterge Paneli - Kurumsal CRM</title>
</head>

<body>
    <section>
        <h2 class="d-none">Gösterge Paneli</h2>
        <!-- Layout handles the visible header, but we keep this for screen readers or structure -->

        <!-- İstatistik Kartları -->
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body d-flex align-items-center">
                        <div class="stat-icon bg-primary bg-opacity-10 text-primary me-3">
                            <i class="bi bi-people-fill"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1">Toplam Müşteri</h6>
                            <h3 class="mb-0" th:text="${stats.totalCustomers}">0</h3>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body d-flex align-items-center">
                        <div class="stat-icon bg-success bg-opacity-10 text-success me-3">
                            <i class="bi bi-person-plus-fill"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1">Yeni Potansiyeller</h6>
                            <h3 class="mb-0" th:text="${stats.newLeads}">0</h3>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body d-flex align-items-center">
                        <div class="stat-icon bg-warning bg-opacity-10 text-warning me-3">
                            <i class="bi bi-graph-up-arrow"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1">Açık Fırsatlar</h6>
                            <h3 class="mb-0" th:text="${stats.openOpportunities}">0</h3>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body d-flex align-items-center">
                        <div class="stat-icon bg-info bg-opacity-10 text-info me-3">
                            <i class="bi bi-currency-dollar"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1">Toplam Değer</h6>
                            <h3 class="mb-0">₺<span
                                    th:text="${#numbers.formatDecimal(stats.pipelineValue, 0, 0)}">0</span></h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Son Aktiviteler -->
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-white">
                        <h5 class="mb-0"><i class="bi bi-clock-history"></i> Son Aktiviteler</h5>
                    </div>
                    <div class="card-body">
                        <div th:if="${#lists.isEmpty(recentActivities)}" class="text-center text-muted py-4">
                            Son aktivite bulunmuyor
                        </div>
                        <div th:each="activity : ${recentActivities}" class="border-bottom pb-2 mb-2">
                            <div class="d-flex justify-content-between">
                                <strong th:text="${activity.subject}">Aktivite</strong>
                                <small class="text-muted"
                                    th:text="${#temporals.format(activity.createdAt, 'dd MMM yyyy')}">Tarih</small>
                            </div>
                            <small class="text-muted" th:text="${activity.activityType}">Tür</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-white">
                        <h5 class="mb-0"><i class="bi bi-calendar-event"></i> Yaklaşan Aktiviteler</h5>
                    </div>
                    <div class="card-body">
                        <div th:if="${#lists.isEmpty(upcomingActivities)}" class="text-center text-muted py-4">
                            Yaklaşan aktivite bulunmuyor
                        </div>
                        <div th:each="activity : ${upcomingActivities}" class="border-bottom pb-2 mb-2">
                            <div class="d-flex justify-content-between">
                                <strong th:text="${activity.subject}">Aktivite</strong>
                                <small class="text-muted"
                                    th:text="${#temporals.format(activity.dueDate, 'dd MMM HH:mm')}">Tarih</small>
                            </div>
                            <small class="text-muted" th:text="${activity.priority}">Öncelik</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

</html>